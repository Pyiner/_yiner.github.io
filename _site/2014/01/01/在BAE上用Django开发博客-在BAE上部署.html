<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/tomorrow-night.css" media="screen" />
    <script src="/javascripts/highlight.pack.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>在BAE上用Django开发博客——在BAE上部署</title>
    <script>
        hljs.tabReplace = '';
        hljs.initHighlightingOnLoad();
    </script>

  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Yiner in Python</h1>
        </header>


        <hr>

        <section id="main_content">
            <h1 id="bae">在BAE上部署</h1>

<p>首先，把数据库上传到BAE，需要注意的是，对于Django App的名字中（我这里的Blog），如果有大写的话，导出的SQL文件中都变成小写的了，而如果上传到云数据库以后还是小写的话，BAE查询的时候会找不到，所以导出SQL以后需要手动替换下大小写。</p>

<p>本地工程和在BAE上部署的是有区别的。 首先，在项目的目录外头，多三个文件<strong>app.conf</strong>，<strong>favicon.ico</strong>，<strong>index.py</strong></p>

<p><strong>app.conf</strong>主要是用来控制后端WEB server的处理逻辑的。app.conf的作用比较多，其中主要的功能是实现URL rewrite。</p>

<pre><code>handlers:
  - url : /static/(.*)
    script : /static/$1
  - url : /templates/(.*)
    script : /templates/$1
  - url : /.*
    script : index.py
  - expire : .jpg modify 10 years
  - expire : .swf modify 10 years
  - expire : .png modify 10 years
  - expire : .gif modify 10 years
  - expire : .JPG modify 10 years
  - expire : .ico modify 10 years</code></pre>

<p>关于app.conf的详细介绍请看：<a href="http://godbae.duapp.com/?p=44#comment-12">http://godbae.duapp.com/?p=44#comment-12</a></p>

<p><strong>favicon.ico</strong>就是网站的favicon了。我后来在head标签里写了favicon，没用到这里这个。</p>

<p><strong>index.py</strong>主要是Django相关配置的吧，这个我也说不好。里面的项目名，需要根据自己的改一下</p>

<pre><code>import os
import sys

os.environ['DJANGO_SETTINGS_MODULE'] = 'MyBlog.settings'

path = os.path.dirname(os.path.abspath(__file__)) + '/MyBlog'
if path not in sys.path:
  sys.path.insert(1, path)

from django.core.handlers.wsgi import WSGIHandler
from bae.core.wsgi import WSGIApplication

application = WSGIApplication(WSGIHandler())</code></pre>
        </section>

        <footer>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
